{% extends "base.html" %}

{% block title %}
    解決済
{% endblock %}

{% block body %}

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <div class="navbar-brand">プロフィール</div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item profile">ユーザー: {{ username }} </li>
                    <li class="nav-item profile">総エラー数: {{ errors_sum }} </li>
                    <li class="nav-item profile">解決済み: {{ solved_sum }} </li>
                </ul>
            </div>
        </div>
    </nav>
    
<div class="contents">
    <h2>共有エラー</h2>

    {% for solved_errors in solved_errors %}
    <details>
        <summary class="error_timeline">{{ solved_errors.message }}</summary>

        <div>
            <ul class="box-detail" >
            <dl class="box-detail">
                <dt>投稿日時:</dt>
                <dd>{{ solved_errors.before_day }}</dd>

                <dt>解決日時:</dt>
                <dd>{{ solved_errors.after_day }}</dd>

                <dt>言語</dt>
                <dd>{{ solved_errors.language }}</dd>

                <dt>状況</dt>
                <dd>{{ solved_errors.explain }}</dd>

                <dt>解決策</dt>
                <dd>{{ solved_errors.solved }}</dd>
            </dl>
            </ul>
        </div>
    </details>
    {% endfor %}
</div>
<a href="/unsolved"><img src="./static/images/side_timeline.png" alt="icon" class = "level_move_right"></a>
<footer><img src="./static/images/timeline_footer.png" alt="footer" class = "footer2"></footer>
{% endblock %}

<!--
名前:sessionにユーザー名を使っているのでそのままいける
エラー数:SELECT COUNT(*) FROM errors WHERE username = ?, session[user_id]
解決数:SELECT COUNT(*) FROM errors WHERE username = ? AND public = ?, session[user_id], True(仮)
-->