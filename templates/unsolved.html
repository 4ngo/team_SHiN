{% extends "base.html" %}

{% block title %}
    未解決
{% endblock %}

{% block body %}

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <div class="navbar-brand">プロフィール</div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item profile">ユーザー: {{ username }} </li>
                    <li class="nav-item profile">総エラー数: {{ errors_sum }} </li>
                    <li class="nav-item profile">解決済み: {{ solved_sum }} </li>
                    <li class="nav-item profile"><a href="/solved" role="button"><span>解決</span></a></li>
                </ul>
            </div>
        </div>
    </nav>


    <hr>
    <form action="/unsolved" method="POST">
        <div>
            <select name="language">
                    <option disabled selected>言語を選択してください</option>
                    <option>すべての言語</option>
                {% for language in languages %}
                    <option>{{ language }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit">絞る</button>
    </form>
    <hr>
    <a href="/record" role="button" class = "home-button"><span>登録</span></a>

<div class="contents">
    <h2>未解決エラー</h2>
    {% for solved_error in solved_errors %}
    <details>
        {% if solved_sum < 2 %}
        <summary class="error_level1">{{ unsolved_error.message }}</summary>
        {% elif solved_sum < 3 %}
        <summary class="error_level2">{{ unsolved_error.message }}</summary>
        {% elif solved_sum < 4 %}
        <summary class="error_level3">{{ unsolved_error.message }}</summary>
        {% elif solved_sum < 5 %}
        <summary class="error_level4">{{ unsolved_error.message }}</summary>
        {% else %}
        <summary class="error_level5">{{ unsolved_error.message }}</summary>
        {% endif %}
        <div>
            <ul class="box-detail">
                <li>投稿日時:{{ unsolved_error.before_day }}</li>
                <li>{{ unsolved_error.language }}</li>
                <li>{{ unsolved_error.explain }}</li>
            </ul>
        </div>

        {% if solved_sum < 2 %}
        <div class="wrap error">
            <a href="/edit/{{ unsolved_error.error_id }}" role="button">編集</a>
        </div>
        {% elif solved_sum < 3 %}
        <div class="wrap error_level2">
            <a href="/edit/{{ unsolved_error.error_id }}" role="button">編集</a>
        </div>
        {% elif solved_sum < 4 %}
        <div class="wrap error_level3">
            <a href="/edit/{{ unsolved_error.error_id }}" role="button">編集</a>
        </div>
        {% elif solved_sum < 5 %}
        <div class="wrap error_level4">
            <a href="/edit/{{ unsolved_error.error_id }}" role="button">編集</a>
        </div>
        {% else %}
        <div class="wrap error_level5">
            <a href="/edit/{{ unsolved_error.error_id }}" role="button">編集</a>
        </div>
        {% endif %}

    </details>
    {% endfor %}
</div>

{{ footer | safe }}
{% endblock %}

<!--
名前:
エラー数:
解決数:
-->